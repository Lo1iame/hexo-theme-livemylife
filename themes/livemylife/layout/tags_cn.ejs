---
layout: layout
---
<!-- Main Content -->
<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <!-- 标签列表 -->

      <%
        var lang;
        var currentURL = page.path.split('/') ;
        if (currentURL.length === 1) {
          lang = page.lang ;
        } else {
          lang = currentURL.shift();
        }

        var tags = site.tags.map(function(tag){
          let tps = tag.posts.filter(function(post){
            return post.lang == lang;
          });
          if(tps.length !== 0){
            let newTag = Object.assign({},tag);
            newTag['posts'] = tps;
            return newTag;
          }
          return;
        }).filter(Boolean);
      %>

      <!-- 标签云 -->
      <div id='tag_cloud' class="tags">
        <% tags.map(function(tag){  %>
        <a href="#<%= tag.name %>" title="<%= tag.name %>" rel="<%= tag.length %>"><%= tag.name %></a>
        <% }) %>
      </div>

      <!-- 标签列表 -->
      <% tags.map(function(tag){  %>
      <div class="one-tag-list">
        <span class="fa fa-tag listing-seperator" id="<%= tag.name %>">
          <span class="tag-text"><%= tag.name %></span>
        </span>
        <% tag.posts.map(function(post){  %>
        <!-- <li class="listing-item">
                  <time datetime="{{ post.date | date:"%Y-%m-%d" }}">{{ post.date | date:"%Y-%m-%d" }}</time>
                  <a href="{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a>
                  </li> -->
        <div class="post-preview">
          <a href="<%- config.root %><%- post.path %>">
            <h2 class="post-title">
              <%- post.title || "Untitled" %>
            </h2>
            <% if (post.subtitle && post.subtitle.length) { %>
            <h3 class="post-subtitle">
              <%- post.subtitle %>
            </h3>
            <% } %>
          </a>
          <!-- <p class="post-meta">{{ post.date | date:"%Y-%m-%d" }}</p> -->
        </div>
        <hr>
        <% }) %>
      </div>
      <% }) %>

    </div>
  </div>
</div>
